<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>
			产品-添加
		</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">
		<link rel="stylesheet" href="./css/x-admin.css" media="all">
		<link href="./umeditor/themes/default/_css/umeditor.css" type="text/css" rel="stylesheet">
		<script type="text/javascript" src="./umeditor/third-party/jquery.min.js"></script>
		<script type="text/javascript" src="./umeditor/third-party/template.min.js"></script>
		<script type="text/javascript" charset="utf-8" src="./umeditor/umeditor.config.js"></script>
		<script type="text/javascript" charset="utf-8" src="./js/editor_api.js"></script>
		<script type="text/javascript" src="./umeditor/lang/zh-cn/zh-cn.js"></script>
		<style type="text/css">
			h1 {
				font-family: "微软雅黑";
				font-weight: normal;
			}
		</style>
	</head>
	<body onload="getContent()">
		<div class="x-body">
			<form class="layui-form">
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>商品名
                        </label>
					<div class="layui-input-inline">
						<input type="text" id="productname" required lay-verify="required" autocomplete="off" class="layui-input">
					</div>
				</div>

				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>现价
                        </label>
					<div class="layui-input-inline">
						<input type="text" id="pricenow" placeholder="单位:元" required lay-verify="required" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>原价
                        </label>
					<div class="layui-input-inline">
						<input type="text" id="pricebefore" placeholder="单位:元" required lay-verify="required" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>商品种类
                    </label>
					<div class="layui-input-inline" id="classify">
						<select lay-verify="required" id="producttype">
							<option></option>
							<optgroup label="一级分类">
								<option value="1">农药</option>
								<option value="2">种子</option>
								<option value="3">肥料</option>
								<option value="4">农机</option>
								<option value="5" selected="selected">特色</option>
							</optgroup>
						</select>
					</div>
				</div>
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>运费标准
                    </label>
					<div class="layui-input-inline">
						<select lay-verify="required" id="deliverprice">
							<option value="1" selected="selected">20kg/元</option>
							<option value="2">20升/元</option>
						</select>
					</div>
				</div>
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>商品状态
                    </label>
					<div class="layui-input-inline">
						<select lay-verify="required" id="status">
							<option value="1" selected="selected">上架</option>
							<option value="2">下架</option>
						</select>
					</div>
				</div>
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>库存
                        </label>
					<div class="layui-input-inline">
						<input type="text" id="storage" required lay-verify="required" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>单位
                        </label>
					<div class="layui-input-inline">
						<input type="text" id="produceunit" placeholder="计量商品的单位" required lay-verify="required" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label for="link" class="layui-form-label">
                        <span class="x-red">*</span>规格
                        </label>
					<div class="layui-input-inline">
						<input type="text" id="productmodel" placeholder="格式：100g/袋" required lay-verify="required" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-form-item">
					<label class="layui-form-label">轮播图</label>
					<div class="layui-input-block">
						<button type="button" class="layui-btn" id="upload1" name="uploadFile">上传多张图片</button>
						<button type="button" class="layui-btn" id="cleanImgs"> <i class="fa fa-trash-o fa-lg"></i>清空图片预览</button>
						<div class="layui-upload-list" id="demo2" style="margin-top: 20px;">
						</div>
					</div>
				</div>
				<div class="layui-form-item">
					<label for="desc" class="layui-form-label">
                        <span class="x-red">*</span>详情描述
                    </label>
					<div class="layui-input-block">
						<form id="form" method="post" name="uploadFile" target="_blank">
							<script type="text/plain" id="description"  style="width:800px;height:240px;">
								<p>欢迎使用UMEDITOR！</p>
							</script>
							<input type="submit" style="display: none;">
						</form>

						<!--<textarea id="L_content" name="content" placeholder="简介" class="layui-textarea fly-editor" style="height: 260px;">简介</textarea>-->
					</div>
					<div class="layui-form-mid layui-word-aux">
						<span class="x-red">*</span>
					</div>

				</div>
				<div class="layui-form-item">
					<label for="L_repass" class="layui-form-label">
                    </label>
					<button class="layui-btn" lay-filter="add" lay-submit="" id="add">
                                                 增加
                    </button>
				</div>
			</form>
		</div>
		<script src="./lib/layui/layui.all.js" charset="utf-8">
		</script>
		<script src="./js/jquery.min.js" charset="utf-8">
		</script>
		<script src="./js/x-layui.js" charset="utf-8">
		</script>
		<script type="text/javascript">
			//umeidtor
			var um = UM.getEditor('description');

			//自动切换提交地址
			var doc = document,
				version = um.options.imageUrl || "php",
				form = doc.getElementById("form");

			if(version.match(/php/)) {
				form.action = "../php/getContent.php";
			} else if(version.match(/net/)) {
				form.action = "../net/getContent.ashx";
			} else if(version.match(/jsp/)) {
				form.action = "../jsp/getContent.jsp";
			} else if(version.match(/asp/)) {
				form.action = "../asp/getContent.asp";
			}
		</script>

		<script type="text/javascript" th:inline="javascript">
			layui.use('upload', function() {
				var upload = layui.upload,
					$ = layui.jquery;
				var uploadInst = upload.render({
					elem: '#upload1', //绑定元素						
					multiple: true,
					size: 10240,
					number: 20,
					field: 'file',
					url: 'http://172.31.112.173:8080/RuralDev/picture/upload.do', //上传接口
					before: function(obj) {
						//预读本地文件示例，不支持ie8
						obj.preview(function(index, file, result) {
							$('#demo2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img"  width="100px" height="80px">  ')
						});
					},success: function(res){
					    alert(res);
					}
				});
				cleanImgsPreview();
			});

			function cleanImgsPreview() {
				$("#cleanImgs").click(function() {
					$('#demo2').html("");

				});
			}
		</script>
		  <!--pricebefore producttype  deliverprice status storage produceunit productmodel description-->
		<script type="text/javascript">
			function getJson(){
				var jsonstart = "{";
			var jsoncontent="\"productname\":\""+$("#productname").val()+"\","
				               +"\"pricenow\":\""+$("#pricenow").val()+"\","+
				               "\"pricebefore\":\""+$("#pricebefore").val()+"\","+
				               "\"producttype\":\""+$("#producttype").find("option:selected").val()+"\","+
				               "\"deliverprice\":\""+$("#deliverprice").find("option:selected").val()+"\","+
				               "\"status\":\""+$("#status").find("option:selected").val()+"\","+
				               "\"storage\":\""+$("#storage").val()+"\","+
				               "\"produceunit\":\""+$("#produceunit").val()+"\","+
				               "\"productmodel\":\""+$("#productmodel").val()+"\","+"\"详情描述\":\""+UM.getEditor('description').getContent()+"\"";
				var jsonend="}";
				return jsonstart+jsoncontent+jsonend;
			}
			$("#add").on('click',function(){
			var jsonstart = "{";
			var jsoncontent="\"productname\":\""+$("#productname").val()+"\","
				               +"\"pricenow\":\""+$("#pricenow").val()+"\","+
				               "\"pricebefore\":\""+$("#pricebefore").val()+"\","+
				               "\"producttype\":\""+$("#producttype").find("option:selected").text()+"\","+
				               "\"deliverprice\":\""+$("#deliverprice").find("option:selected").text()+"\","+
				               "\"status\":\""+$("#status").find("option:selected").text()+"\","+
				               "\"storage\":\""+$("#storage").val()+"\","+
				               "\"produceunit\":\""+$("#produceunit").val()+"\","+
				               "\"productmodel\":\""+$("#productmodel").val()+"\","+"\"description\":\""+UM.getEditor('description').getContent()+"\"";
				var jsonend="}";
				alert(jsonstart+jsoncontent+jsonend);
//				alert("\"productname\":"+$("#producttype").find("option:selected").text());
			});
		</script>
	</body>

</html>